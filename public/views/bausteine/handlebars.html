<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Test Handlebars</title>

    <link rel="stylesheet" href="/jqueryUi/jquery-ui.css">

    <script type="text/javascript" src="/javascript/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="/jqueryUi/jquery-ui.js"></script>

    <script type="text/javascript" src="/javascript/handlebars-v2.0.0.js"></script>

    <link rel="stylesheet" href="/css/main.css">

    <!-- Steuerung -->
    <script type="text/javascript">

        // Tabs
        $(function() {
            $( "#tabs" ).tabs();
        });

        $(document).ready(function()
        {
            // Formular anzeigen und befÃ¼llen
            $("#anzeigen").on("click",function(e){
                $.ajax({
                    url: '/handlebars/dataFormTeil2/',
                    type: 'post',
                    data: ({
                        bla: 'bla',
                        blub: 'blub'
                    }),
                    dataType: 'json',
                    success: function(result){
                        var source   = $("#subtemplat2").html();
                        var template = Handlebars.compile(source);
                        $('#teilbereich2').html(template(result));
                    }
                });
            });

            // Teilbereich leeren
            $("#verstecken").on("click",function(e){
                $("#teilbereich2").html(' ');
            });

            // Tabelle
            var dataTable = [
                { n: 'a' },
                { n: 'b' },
                { n: 'c' },
                { n: 'd' },
                { n: 'e' },
                { n: 'f' },
                { n: 'g' },
                { n: 'h' },
                { n: 'i' },
                { n: 'j' },
                { n: 'k' },
                { n: 'l' },
                { n: 'm' },
                { n: 'n' },
                { n: 'o' }
            ];

            function transform ( arr ) {
                var result = [], temp = [];
                arr.forEach( function ( elem, i ) {
                    if ( i > 0 && i % 5 === 0 ) {
                        result.push( temp );
                        temp = [];
                    }
                    temp.push( elem );
                });
                if ( temp.length > 0 ) {
                    result.push( temp );
                }
                return result;
            }

            $("#tabelleButton").on("click",function(e){
                // result = transform( dataTable );

                $.ajax({
                    url: '/handlebars/dataGrid/',
                    type: 'post',
                    data: ({
                        bla: 'bla',
                        blub: 'blub'
                    }),
                    dataType: 'json',
                    success: function(result){
//                        var source   = $("#subtemplat2").html();
//                        var template = Handlebars.compile(source);
//                        $('#teilbereich2').html(template(result));

                        var source   = $("#subtabelle").html();
                        var template = Handlebars.compile(source);
                        $('#tabelle').html(template(result));
                    }
                });


            });


        });

    </script>
</head>
<body>
    <h3>Grundidee Template</h3>

    <div id="tabs" style="width: 1200px;">
        <ul>
            <li><a href="#tabs-1">Tab 1</a></li>
            <li><a href="#tabs-2">Tab 2</a></li>
        </ul>

        <!-- Tab 1 -->
        <div id="tabs-1" style="min-height: 800px;">
            <!-- Teilbereich 1 -->
            <h3>Teilbereich 1 , Stammelement</h3>
            <div id="teilbereich1" style="width: 600px; height: 600px; border: red 1px solid; float: left;">
                {% include 'forms/formular1.hbs' %}
            </div>

            <!-- Teilbereich 2 -->
            <h3>Teilbereich 2</h3>
            <div id="teilbereich2" style="width: 500px; height: 300px; border: solid #008000 1px; float:left;">
               &nbsp;
            </div>

            <!-- Subtemplat 2 -->
            <script id="subtemplat2" type="text/x-handlebars-template">
                {% include 'forms/formular2.hbs' %}
            </script>

            <!-- Tabelle -->
            <h3>Tabelle</h3>
            <div id="tabelle" style="width: 500px; height: 300px; border: solid #008000 1px; float:left;">
               &nbsp;
            </div>

            <script id="subtabelle" type="text/x-handlebars-template">
                {% include 'grids/grid1.hbs' %}
            </script>
        </div>

        <!-- Tab 2 -->
        <div id="tabs-2" style="min-height: 800px;">
            Teil 2
        </div>



    </div>
</body>
</html>